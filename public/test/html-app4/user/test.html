<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>h5实现一键复制到粘贴板 兼容ios</title>
</head>
<body style="background: #ff6600;">
<h3>h5实现一键复制到粘贴板 兼容ios</h3>
<button onclick="copyText('h5实现一键复制到粘贴板 兼容ios')">copy</button>
<script>
  const copyText = (text) => {
    const textString = text.toString();
    let input = document.querySelector('#copy-input');
    if (!input) {
      input = document.createElement('input');
      input.id = "copy-input";
      input.readOnly = "readOnly";        // 防止ios聚焦触发键盘事件
      input.style.position = "fixed";
      input.style.left = "0";
      input.style.top="0";
      input.style.zIndex = "-1000";
      document.body.appendChild(input)
    }
    input.value = textString;
    selectText(input, 0, textString.length);
    if (document.execCommand('copy')) {
      document.execCommand('copy');
      alert('已复制到粘贴板');
    }else {
      console.log('不兼容');
    }
    input.blur();
    function selectText(textbox, startIndex, stopIndex) {
      if (textbox.createTextRange) {//ie
        const range = textbox.createTextRange();
        range.collapse(true);
        range.moveStart('character', startIndex);//起始光标
        range.moveEnd('character', stopIndex - startIndex);//结束光标
        range.select();//不兼容苹果
      } else {//firefox/chrome
        textbox.setSelectionRange(startIndex, stopIndex);
        textbox.focus();
      }
    }
  };

</script>
</body>
</html>